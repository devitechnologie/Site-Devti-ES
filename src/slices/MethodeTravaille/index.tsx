import { Content } from "@prismicio/client";
import { PrismicRichText, SliceComponentProps } from "@prismicio/react";
import { getTranslations } from "next-intl/server";
import Link from "next/link";

/**
 * Props for `MethodeTravaille`.
 */
export type MethodeTravailleProps =
  SliceComponentProps<Content.MethodeTravailleSlice>;

/**
 * Component for "MethodeTravaille" Slices.
 */
const MethodeTravaille = async ({ slice }: MethodeTravailleProps): Promise<JSX.Element> => {
  const t = await getTranslations();

  return (
    <section className="app-container section-py">
      <div>
        <h2 className="title-h2 text-center">
          <Link
            href='/methode_travaille'
          >
            {
              slice.primary.title
            }
          </Link>
        </h2>
        <div className="mt-5 max-w-[750px] mx-auto">
          <PrismicRichText
            field={slice.primary.description}
            components={{
              paragraph: ({ children }) => (
                <p
                  className="title-p text-center"
                >
                  {
                    children
                  }
                </p>
              ),
              hyperlink: ({ children, node }) => {
                return (
                  <Link
                    href={node.data.url ?? '/'}
                    className="text-primary-normal-purple hover:underline"
                  >
                    {children}
                  </Link>
                )
              }
            }}
          />
        </div>

      </div>
      <div className="flex items-center justify-center gap-16 mt-16 flex-col md:flex-row">
        {
          slice.primary.methods_items.map((item, index) => (
            <div className="flex flex-col items-center justify-center gap-4" key={index}>
              <span
                className="relative flex items-center justify-center font-semibold w-24 h-24 text-3xl text-gray-400 bg-primary-dark-gray-100 rounded-full"
              >
                {
                  item.order
                }
                {
                  index === 1 && (
                    <div className="absolute top-1/2 right-[100px] hidden md:block">
                      <ArrowSVG dir="right" />
                    </div>
                  )
                }
                {
                  index === 1 && (
                    <div className="absolute top-1/2 left-[100px] hidden md:block">
                      <ArrowSVG dir="left" />
                    </div>
                  )
                }
              </span>
              <h3 className="title-h3 text-primary-dark-purple text-center">
                {
                  item.title
                }
              </h3>
              {/* <p className="title-p text-center max-w-[250px] text-gray-500">
                {
                  t('home.methodOfWorking.etape1.description')
                }
              </p> */}
              <PrismicRichText
                field={item.description}
                components={{
                  paragraph: ({ children }) => (
                    <p
                      className="title-p text-center max-w-[250px] text-gray-500"
                    >
                      {
                        children
                      }
                    </p>
                  )
                }}
              />
            </div>
          ))
        }
      </div>
    </section>
  );
};

const ArrowSVG = ({ className, dir }: { className?: string; dir: 'left' | 'right' }) => {
  if (dir === 'left')
    return (
      <svg
        className={className}
        width="210"
        height="30"
        viewBox="0 0 249 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path
          id="Arc 1"
          d="M0.786687 1.78653C0.536936 1.66872 0.429976 1.37075 0.547786 1.121C0.665596 0.871252 0.963562 0.764292 1.21331 0.882103L0.786687 1.78653ZM249 1.33432L245.686 6.06171L243.249 0.827681L249 1.33432ZM1.21331 0.882103C2.08898 1.29516 2.96704 1.70397 3.84747 2.10851L3.42995 3.01718C2.54648 2.61124 1.66538 2.20102 0.786687 1.78653L1.21331 0.882103ZM9.15277 4.48185C10.9276 5.25449 12.7116 6.00992 14.5047 6.74793L14.1241 7.67267C12.3248 6.9321 10.5346 6.17406 8.75362 5.39874L9.15277 4.48185ZM19.9013 8.90582C21.7055 9.60629 23.5185 10.2892 25.34 10.9545L24.997 11.8938C23.1692 11.2262 21.3499 10.5409 19.5394 9.83804L19.9013 8.90582ZM30.8193 12.8932C32.65 13.5203 34.489 14.1296 36.3361 14.7209L36.0312 15.6733C34.1777 15.0799 32.3323 14.4685 30.4952 13.8392L30.8193 12.8932ZM41.8892 16.4372C43.7435 16.9898 45.6055 17.5245 47.475 18.0409L47.2088 19.0048C45.3327 18.4866 43.4643 17.9501 41.6036 17.3955L41.8892 16.4372ZM53.0931 19.532C54.9678 20.0093 56.8498 20.4685 58.7388 20.9092L58.5116 21.883C56.616 21.4408 54.7275 20.9801 52.8464 20.501L53.0931 19.532ZM64.4127 22.1728C66.3047 22.5742 68.2035 22.9572 70.109 23.3215L69.9212 24.3038C68.0091 23.9381 66.1037 23.5538 64.2051 23.151L64.4127 22.1728ZM75.8288 24.3559C77.7353 24.6809 79.6481 24.9874 81.5671 25.2751L81.4188 26.264C79.4933 25.9753 77.5738 25.6678 75.6608 25.3417L75.8288 24.3559ZM87.3234 26.0792C89.2413 26.3275 91.1651 26.5572 93.0945 26.768L92.9859 27.7621C91.0499 27.5506 89.1195 27.3201 87.195 27.0709L87.3234 26.0792ZM98.8778 27.3415C100.804 27.5132 102.736 27.666 104.673 27.7999L104.604 28.7975C102.66 28.6632 100.722 28.5098 98.7891 28.3375L98.8778 27.3415ZM110.474 28.1431C112.405 28.2382 114.341 28.3145 116.282 28.3717L116.253 29.3713C114.305 29.3139 112.362 29.2374 110.424 29.1419L110.474 28.1431ZM122.093 28.4858C123.061 28.4952 124.03 28.5 125 28.5V29.5C124.026 29.5 123.054 29.4952 122.083 29.4857L122.093 28.4858ZM125 28.5C125.97 28.5 126.939 28.4952 127.908 28.4858L127.917 29.4857C126.946 29.4952 125.974 29.5 125 29.5V28.5ZM133.718 28.3717C135.659 28.3145 137.595 28.2382 139.526 28.1431L139.576 29.1419C137.638 29.2374 135.695 29.3139 133.747 29.3713L133.718 28.3717ZM145.327 27.7999C147.264 27.666 149.196 27.5131 151.122 27.3415L151.211 28.3375C149.278 28.5098 147.34 28.6632 145.396 28.7975L145.327 27.7999ZM156.906 26.768C158.835 26.5572 160.759 26.3275 162.677 26.0792L162.805 27.0709C160.881 27.3201 158.95 27.5506 157.014 27.7621L156.906 26.768ZM168.433 25.2751C170.352 24.9874 172.265 24.6809 174.171 24.3559L174.339 25.3417C172.426 25.6678 170.507 25.9753 168.581 26.264L168.433 25.2751ZM179.891 23.3215C181.796 22.9572 183.695 22.5742 185.587 22.1728L185.795 23.151C183.896 23.5538 181.991 23.9381 180.079 24.3037L179.891 23.3215ZM191.261 20.9092C193.15 20.4685 195.032 20.0093 196.907 19.5319L197.154 20.501C195.272 20.9801 193.384 21.4408 191.488 21.883L191.261 20.9092ZM202.525 18.0409C204.395 17.5245 206.257 16.9898 208.111 16.4372L208.396 17.3955C206.536 17.9501 204.667 18.4866 202.791 19.0048L202.525 18.0409ZM213.664 14.7209C215.511 14.1296 217.35 13.5203 219.181 12.8932L219.505 13.8392C217.668 14.4685 215.822 15.0799 213.969 15.6733L213.664 14.7209ZM224.66 10.9545C226.481 10.2892 228.294 9.60628 230.099 8.90582L230.461 9.83803C228.65 10.5409 226.831 11.2262 225.003 11.8938L224.66 10.9545ZM235.495 6.74792C237.288 6.00992 239.072 5.25448 240.847 4.48184L241.246 5.39873C239.465 6.17405 237.675 6.93209 235.876 7.67266L235.495 6.74792ZM0.573374 2.23874C0.0738719 2.00312 -0.140047 1.40719 0.0955721 0.90769C0.331191 0.408188 0.927125 0.194269 1.42663 0.429888L0.573374 2.23874ZM249 1.33432L242.371 10.7891L237.498 0.321045L249 1.33432ZM1.42663 0.429888C2.30078 0.842232 3.17732 1.25034 4.05622 1.65417L3.2212 3.47152C2.3362 3.06488 1.45358 2.65395 0.573374 2.23874L1.42663 0.429888ZM9.35234 4.02341C11.1241 4.79471 12.9051 5.54884 14.695 6.28556L13.9338 8.13503C12.1314 7.39319 10.3381 6.63383 8.55404 5.85718L9.35234 4.02341ZM20.0822 8.43972C21.8834 9.13896 23.6932 9.82074 25.5116 10.4848L24.8255 12.3635C22.9945 11.6948 21.1721 11.0082 19.3584 10.3041L20.0822 8.43972ZM30.9813 12.4202C32.8089 13.0462 34.6447 13.6544 36.4885 14.2447L35.8787 16.1495C34.0221 15.5551 32.1735 14.9426 30.3332 14.3123L30.9813 12.4202ZM42.032 15.958C43.8831 16.5097 45.7418 17.0434 47.6082 17.5589L47.0757 19.4868C45.1964 18.9676 43.3247 18.4302 41.4608 17.8747L42.032 15.958ZM53.2165 19.0474C55.0879 19.524 56.9666 19.9823 58.8524 20.4222L58.398 22.3699C56.4991 21.9269 54.6074 21.4654 52.723 20.9856L53.2165 19.0474ZM64.5164 21.6836C66.4052 22.0844 68.3007 22.4667 70.2029 22.8304L69.8272 24.7949C67.9119 24.4286 66.0032 24.0436 64.1013 23.6401L64.5164 21.6836ZM75.9129 23.863C77.816 24.1875 79.7256 24.4934 81.6412 24.7806L81.3447 26.7585C79.4158 26.4693 77.4931 26.1613 75.5767 25.8346L75.9129 23.863ZM87.3876 25.5833C89.3022 25.8312 91.2227 26.0605 93.1488 26.2709L92.9316 28.2591C90.9922 28.0472 89.0586 27.8164 87.1308 27.5667L87.3876 25.5833ZM98.9222 26.8435C100.845 27.0148 102.774 27.1674 104.707 27.3011L104.569 29.2963C102.622 29.1618 100.681 29.0081 98.7447 28.8356L98.9222 26.8435ZM110.498 27.6437C112.426 27.7387 114.359 27.8148 116.297 27.8719L116.238 29.871C114.287 29.8135 112.341 29.7369 110.4 29.6413L110.498 27.6437ZM122.097 27.9858C123.064 27.9953 124.031 28 125 28V30C124.025 30 123.051 29.9952 122.078 29.9857L122.097 27.9858ZM125 28C125.969 28 126.936 27.9953 127.903 27.9858L127.922 29.9857C126.949 29.9952 125.975 30 125 30V28ZM133.703 27.8719C135.641 27.8148 137.574 27.7387 139.502 27.6437L139.6 29.6413C137.659 29.7369 135.713 29.8135 133.762 29.871L133.703 27.8719ZM145.293 27.3011C147.226 27.1674 149.155 27.0148 151.078 26.8435L151.255 28.8356C149.319 29.0081 147.378 29.1618 145.431 29.2963L145.293 27.3011ZM156.851 26.2709C158.777 26.0605 160.698 25.8312 162.612 25.5833L162.869 27.5667C160.941 27.8164 159.008 28.0472 157.068 28.2591L156.851 26.2709ZM168.359 24.7806C170.274 24.4934 172.184 24.1875 174.087 23.863L174.423 25.8346C172.507 26.1613 170.584 26.4693 168.655 26.7585L168.359 24.7806ZM179.797 22.8304C181.699 22.4667 183.595 22.0844 185.484 21.6836L185.899 23.6401C183.997 24.0436 182.088 24.4286 180.173 24.7948L179.797 22.8304ZM191.148 20.4222C193.033 19.9823 194.912 19.524 196.784 19.0474L197.277 20.9856C195.393 21.4654 193.501 21.9269 191.602 22.3699L191.148 20.4222ZM202.392 17.5589C204.258 17.0434 206.117 16.5097 207.968 15.958L208.539 17.8747C206.675 18.4302 204.804 18.9676 202.924 19.4868L202.392 17.5589ZM213.511 14.2447C215.355 13.6544 217.191 13.0462 219.019 12.4202L219.667 14.3123C217.827 14.9426 215.978 15.5551 214.121 16.1495L213.511 14.2447ZM224.488 10.4848C226.307 9.82073 228.117 9.13896 229.918 8.43971L230.642 10.3041C228.828 11.0082 227.006 11.6947 225.175 12.3635L224.488 10.4848ZM235.305 6.28556C237.095 5.54883 238.876 4.7947 240.648 4.0234L241.446 5.85717C239.662 6.63383 237.869 7.39318 236.066 8.13503L235.305 6.28556Z"
          fill="#7F8C89"
        />
      </svg>
    )

  return (
    <svg
      className={className}
      xmlns="http://www.w3.org/2000/svg"
      width="210"
      height="30"
      viewBox="0 0 249 30"
      fill="none">
      <path
        d="M0.786687 28.2135C0.536936 28.3313 0.429976 28.6292 0.547786 28.879C0.665596 29.1287 0.963562 29.2357 1.21331 29.1179L0.786687 28.2135ZM249 28.6657L245.686 23.9383L243.249 29.1723L249 28.6657ZM1.21331 29.1179C2.08898 28.7048 2.96704 28.296 3.84747 27.8915L3.42995 26.9828C2.54648 27.3888 1.66538 27.799 0.786687 28.2135L1.21331 29.1179ZM9.15277 25.5181C10.9276 24.7455 12.7116 23.9901 14.5047 23.2521L14.1241 22.3273C12.3248 23.0679 10.5346 23.8259 8.75362 24.6013L9.15277 25.5181ZM19.9013 21.0942C21.7055 20.3937 23.5185 19.7108 25.34 19.0455L24.997 18.1062C23.1692 18.7738 21.3499 19.4591 19.5394 20.162L19.9013 21.0942ZM30.8193 17.1068C32.65 16.4797 34.489 15.8704 36.3361 15.2791L36.0312 14.3267C34.1777 14.9201 32.3323 15.5315 30.4952 16.1608L30.8193 17.1068ZM41.8892 13.5628C43.7435 13.0102 45.6055 12.4755 47.475 11.9591L47.2088 10.9952C45.3327 11.5134 43.4643 12.0499 41.6036 12.6045L41.8892 13.5628ZM53.0931 10.468C54.9678 9.99068 56.8498 9.53154 58.7388 9.09083L58.5116 8.11698C56.616 8.55922 54.7275 9.01995 52.8464 9.49897L53.0931 10.468ZM64.4127 7.82725C66.3047 7.42583 68.2035 7.04283 70.109 6.67845L69.9212 5.69625C68.0091 6.06189 66.1037 6.44621 64.2051 6.84902L64.4127 7.82725ZM75.8288 5.6441C77.7353 5.31907 79.6481 5.01262 81.5671 4.72494L81.4188 3.73599C79.4933 4.02466 77.5738 4.33217 75.6608 4.65832L75.8288 5.6441ZM87.3234 3.92084C89.2413 3.67246 91.1651 3.4428 93.0945 3.23202L92.9859 2.23794C91.0499 2.44943 89.1195 2.67989 87.195 2.92912L87.3234 3.92084ZM98.8778 2.65852C100.804 2.48685 102.736 2.33398 104.673 2.2001L104.604 1.20248C102.66 1.33682 100.722 1.49021 98.7891 1.66247L98.8778 2.65852ZM110.474 1.85686C112.405 1.76176 114.341 1.68551 116.282 1.6283L116.253 0.628738C114.305 0.686139 112.362 0.762644 110.424 0.858074L110.474 1.85686ZM122.093 1.51425C123.061 1.50476 124.03 1.5 125 1.5V0.5C124.026 0.5 123.054 0.504773 122.083 0.514296L122.093 1.51425ZM125 1.5C125.97 1.5 126.939 1.50476 127.908 1.51425L127.917 0.514297C126.946 0.504773 125.974 0.5 125 0.5V1.5ZM133.718 1.6283C135.659 1.68551 137.595 1.76176 139.526 1.85687L139.576 0.858076C137.638 0.762645 135.695 0.68614 133.747 0.628739L133.718 1.6283ZM145.327 2.2001C147.264 2.33398 149.196 2.48685 151.122 2.65852L151.211 1.66247C149.278 1.49021 147.34 1.33682 145.396 1.20248L145.327 2.2001ZM156.906 3.23202C158.835 3.4428 160.759 3.67247 162.677 3.92084L162.805 2.92912C160.881 2.67989 158.95 2.44944 157.014 2.23794L156.906 3.23202ZM168.433 4.72494C170.352 5.01262 172.265 5.31907 174.171 5.6441L174.339 4.65832C172.426 4.33217 170.507 4.02467 168.581 3.736L168.433 4.72494ZM179.891 6.67845C181.796 7.04284 183.695 7.42583 185.587 7.82725L185.795 6.84902C183.896 6.44622 181.991 6.0619 180.079 5.69625L179.891 6.67845ZM191.261 9.09083C193.15 9.53154 195.032 9.99068 196.907 10.4681L197.154 9.49897C195.272 9.01995 193.384 8.55922 191.488 8.11698L191.261 9.09083ZM202.525 11.9591C204.395 12.4755 206.257 13.0102 208.111 13.5628L208.396 12.6045C206.536 12.0499 204.667 11.5134 202.791 10.9952L202.525 11.9591ZM213.664 15.2791C215.511 15.8704 217.35 16.4797 219.181 17.1068L219.505 16.1608C217.668 15.5315 215.822 14.9201 213.969 14.3267L213.664 15.2791ZM224.66 19.0455C226.481 19.7108 228.294 20.3937 230.099 21.0942L230.461 20.162C228.65 19.4591 226.831 18.7738 225.003 18.1062L224.66 19.0455ZM235.495 23.2521C237.288 23.9901 239.072 24.7455 240.847 25.5182L241.246 24.6013C239.465 23.826 237.675 23.0679 235.876 22.3273L235.495 23.2521ZM0.573374 27.7613C0.0738719 27.9969 -0.140047 28.5928 0.0955721 29.0923C0.331191 29.5918 0.927125 29.8057 1.42663 29.5701L0.573374 27.7613ZM249 28.6657L242.371 19.2109L237.498 29.679L249 28.6657ZM1.42663 29.5701C2.30078 29.1578 3.17732 28.7497 4.05622 28.3458L3.2212 26.5285C2.3362 26.9351 1.45358 27.3461 0.573374 27.7613L1.42663 29.5701ZM9.35234 25.9766C11.1241 25.2053 12.9051 24.4512 14.695 23.7144L13.9338 21.865C12.1314 22.6068 10.3381 23.3662 8.55404 24.1428L9.35234 25.9766ZM20.0822 21.5603C21.8834 20.861 23.6932 20.1793 25.5116 19.5152L24.8255 17.6365C22.9945 18.3052 21.1721 18.9918 19.3584 19.6959L20.0822 21.5603ZM30.9813 17.5798C32.8089 16.9538 34.6447 16.3456 36.4885 15.7553L35.8787 13.8505C34.0221 14.4449 32.1735 15.0574 30.3332 15.6877L30.9813 17.5798ZM42.032 14.042C43.8831 13.4903 45.7418 12.9566 47.6082 12.4411L47.0757 10.5132C45.1964 11.0324 43.3247 11.5698 41.4608 12.1253L42.032 14.042ZM53.2165 10.9526C55.0879 10.476 56.9666 10.0177 58.8524 9.57776L58.398 7.63006C56.4991 8.07306 54.6074 8.53458 52.723 9.01443L53.2165 10.9526ZM64.5164 8.31636C66.4052 7.91564 68.3007 7.53331 70.2029 7.16955L69.8272 5.20515C67.9119 5.57142 66.0032 5.95641 64.1013 6.35991L64.5164 8.31636ZM75.9129 6.13698C77.816 5.81252 79.7256 5.5066 81.6412 5.21942L81.3447 3.24152C79.4158 3.53069 77.4931 3.83872 75.5767 4.16543L75.9129 6.13698ZM87.3876 4.4167C89.3022 4.16875 91.2227 3.93948 93.1488 3.72906L92.9316 1.74089C90.9922 1.95275 89.0586 2.1836 87.1308 2.43326L87.3876 4.4167ZM98.9222 3.15654C100.845 2.98517 102.774 2.83256 104.707 2.69891L104.569 0.703673C102.622 0.838239 100.681 0.991889 98.7447 1.16444L98.9222 3.15654ZM110.498 2.35626C112.426 2.26131 114.359 2.1852 116.297 2.12809L116.238 0.128955C114.287 0.186453 112.341 0.263088 110.4 0.358679L110.498 2.35626ZM122.097 2.01422C123.064 2.00475 124.031 2 125 2V0C124.025 0 123.051 0.00478077 122.078 0.0143203L122.097 2.01422ZM125 2C125.969 2 126.936 2.00475 127.903 2.01422L127.922 0.0143206C126.949 0.00478089 125.975 0 125 0V2ZM133.703 2.12809C135.641 2.1852 137.574 2.26132 139.502 2.35626L139.6 0.358681C137.659 0.263089 135.713 0.186454 133.762 0.128956L133.703 2.12809ZM145.293 2.69891C147.226 2.83257 149.155 2.98517 151.078 3.15655L151.255 1.16444C149.319 0.991891 147.378 0.83824 145.431 0.703675L145.293 2.69891ZM156.851 3.72907C158.777 3.93948 160.698 4.16875 162.612 4.4167L162.869 2.43326C160.941 2.18361 159.008 1.95275 157.068 1.74089L156.851 3.72907ZM168.359 5.21942C170.274 5.5066 172.184 5.81252 174.087 6.13699L174.423 4.16543C172.507 3.83872 170.584 3.53069 168.655 3.24152L168.359 5.21942ZM179.797 7.16956C181.699 7.53331 183.595 7.91564 185.484 8.31636L185.899 6.35991C183.997 5.95641 182.088 5.57142 180.173 5.20515L179.797 7.16956ZM191.148 9.57776C193.033 10.0177 194.912 10.476 196.784 10.9526L197.277 9.01444C195.393 8.53458 193.501 8.07306 191.602 7.63006L191.148 9.57776ZM202.392 12.4411C204.258 12.9566 206.117 13.4903 207.968 14.042L208.539 12.1253C206.675 11.5698 204.804 11.0324 202.924 10.5132L202.392 12.4411ZM213.511 15.7553C215.355 16.3456 217.191 16.9538 219.019 17.5798L219.667 15.6877C217.827 15.0574 215.978 14.4449 214.121 13.8505L213.511 15.7553ZM224.488 19.5152C226.307 20.1793 228.117 20.861 229.918 21.5603L230.642 19.6959C228.828 18.9918 227.006 18.3053 225.175 17.6365L224.488 19.5152ZM235.305 23.7144C237.095 24.4512 238.876 25.2053 240.648 25.9766L241.446 24.1428C239.662 23.3662 237.869 22.6068 236.066 21.865L235.305 23.7144Z"
        fill="#7F8C89"
      />
    </svg>
  )

}

export default MethodeTravaille;
